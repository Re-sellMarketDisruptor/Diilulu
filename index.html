<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aqua Shop</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* --- FRUTIGER AQUA AESTHETIC --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body { 
            /* The classic Frutiger gradient: Ocean to Sky */
            background: linear-gradient(180deg, #a1ffce 0%, #faffd1 100%); 
            background-attachment: fixed;
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', sans-serif; /* Humanist 2000s font */
            padding-bottom: 90px; 
            color: #005f6b;
        }

        /* --- GLASSMOPHISM UTILITY --- */
        .glass-panel {
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 4px 15px rgba(0, 168, 255, 0.15);
        }

        /* --- TOP BAR --- */
        .top-bar {
            position: sticky; top: 0; 
            background: linear-gradient(to bottom, #ffffff 0%, #e6f7ff 100%);
            padding: 15px;
            border-bottom: 1px solid #b3e5fc; 
            display: flex; align-items: center; gap: 10px; z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 100, 200, 0.1);
        }
        .search-input {
            width: 100%; padding: 10px 10px 10px 35px; border-radius: 20px; 
            border: 1px solid #81d4fa;
            background: linear-gradient(to bottom, #ffffff, #f0fbff);
            color: #0277bd; font-weight: bold; outline: none;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        }
        .search-icon { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #0288d1; }

        /* --- PRODUCT GRID --- */
        .product-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 15px; }
        
        .product-card {
            border-radius: 15px; overflow: hidden;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 1);
            box-shadow: 0 5px 15px rgba(0, 100, 200, 0.1);
            transition: transform 0.2s;
            cursor: pointer;
        }
        .product-card:active { transform: scale(0.98); }
        
        .product-image { 
            width: 100%; height: 180px; object-fit: cover; 
            background: #e1f5fe; border-bottom: 1px solid #b3e5fc;
        }
        .product-info { padding: 12px; }
        .product-title { font-size: 14px; font-weight: bold; color: #0277bd; margin-bottom: 4px; }
        .brand { font-size: 11px; color: #00acc1; text-transform: uppercase; letter-spacing: 1px; }
        .price { font-weight: 900; color: #01579b; font-size: 16px; margin-top: 5px; text-shadow: 0 1px 0 rgba(255,255,255,1); }

        /* --- BOTTOM NAV (THE CHANGES YOU REQUESTED) --- */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%; 
            /* Glossy Gel Bar */
            background: linear-gradient(to bottom, rgba(255,255,255,0.9) 0%, rgba(220,245,255,0.9) 100%);
            backdrop-filter: blur(10px);
            border-top: 1px solid #81d4fa;
            display: flex; justify-content: space-around; /* Spreads 3 items evenly */
            align-items: center; padding: 10px; height: 75px; z-index: 200;
            box-shadow: 0 -5px 20px rgba(0, 168, 255, 0.15);
        }
        
        .nav-btn { 
            display: flex; flex-direction: column; align-items: center; 
            text-decoration: none; color: #0277bd; font-size: 11px; font-weight: bold;
            opacity: 0.7; transition: all 0.2s;
        }
        .nav-btn.active, .nav-btn:active { opacity: 1; transform: translateY(-2px); }
        
        /* Glossy Icons */
        .nav-btn i { 
            font-size: 24px; margin-bottom: 4px; 
            background: -webkit-linear-gradient(#00e5ff, #0091ea);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 2px 2px rgba(0,100,200,0.2));
        }

        /* --- PRODUCT PAGE (VINTED LAYOUT / AQUA STYLE) --- */
        #product-page {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(180deg, #f0fbff 0%, #ffffff 100%);
            z-index: 500; overflow-y: auto; padding-bottom: 100px;
        }
        
        .app-header {
            position: absolute; top: 0; width: 100%; padding: 15px;
            display: flex; justify-content: space-between; z-index: 10;
        }
        .icon-btn { 
            background: rgba(255,255,255,0.4); border: 1px solid rgba(255,255,255,0.6);
            color: #01579b; border-radius: 50%; width: 40px; height: 40px; 
            display: flex; align-items: center; justify-content: center;
            backdrop-filter: blur(5px); box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .image-container { position: relative; width: 100%; height: 400px; background: #fff; }
        .carousel { display: flex; overflow-x: auto; scroll-snap-type: x mandatory; width: 100%; height: 100%; }
        .carousel img { min-width: 100%; height: 100%; object-fit: cover; scroll-snap-align: center; }

        /* The Heart */
        .floating-heart {
            position: absolute; bottom: 15px; right: 15px; width: 50px; height: 50px;
            background-size: contain; background-repeat: no-repeat; background-position: center;
            filter: grayscale(100%) opacity(0.6); transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer; z-index: 20;
        }
        .floating-heart.active { filter: grayscale(0%) opacity(1); transform: scale(1.1); }

        .detail-section { padding: 20px; border-bottom: 1px solid #b3e5fc; background: rgba(255,255,255,0.5); }
        .title-row { display: flex; justify-content: space-between; align-items: start; }
        .detail-title { font-size: 20px; color: #01579b; font-weight: bold; margin-bottom: 5px; flex-grow: 1; }
        .detail-meta { font-size: 13px; color: #0097a7; margin-bottom: 10px; font-weight: bold; }
        .detail-price { font-size: 26px; font-weight: 900; color: #0277bd; }
        
        .buyer-protection {
            font-size: 13px; color: #00acc1; background: rgba(224, 247, 250, 0.5);
            padding: 8px; border-radius: 8px; margin-top: 10px; display: inline-flex; align-items: center; gap: 6px;
        }

        /* Glossy Action Buttons */
        .action-bar {
            position: fixed; bottom: 0; left: 0; width: 100%; padding: 15px;
            background: rgba(255,255,255,0.9); backdrop-filter: blur(10px); border-top: 1px solid #b3e5fc; 
            display: flex; gap: 15px; z-index: 600;
        }
        
        .btn-aqua {
            flex: 1; padding: 14px; border-radius: 25px; font-weight: bold; cursor: pointer; text-transform: uppercase; letter-spacing: 1px;
            box-shadow: 0 4px 6px rgba(0, 168, 255, 0.2), inset 0 1px 0 rgba(255,255,255,0.4);
            border: 1px solid rgba(0,0,0,0.05); transition: transform 0.1s;
        }
        .btn-aqua:active { transform: translateY(2px); box-shadow: 0 2px 3px rgba(0,0,0,0.1); }

        /* Offer Button (Outline) */
        .btn-offer {
            background: linear-gradient(to bottom, #ffffff 0%, #e1f5fe 100%);
            color: #0277bd; border: 1px solid #4fc3f7;
        }
        /* Buy Button (Solid) */
        .btn-buy {
            background: linear-gradient(to bottom, #29b6f6 0%, #0288d1 100%);
            color: #fff; text-shadow: 0 1px 1px rgba(0,0,0,0.2);
        }

        /* Like Counter */
        .like-count-text { font-size: 14px; color: #0277bd; display: flex; align-items: center; gap: 5px; font-weight: bold; }
        .like-count-text i { color: #ff4081; }

    </style>
</head>
<body>

    <div id="main-view">
        <nav class="top-bar">
            <div style="position:relative; flex-grow:1;">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" placeholder="Search...">
            </div>
        </nav>

        <main class="product-grid" id="shop-container">
             <div style="padding:20px; grid-column:span 2; text-align:center; color:#0277bd;">Loading Aqua Shop...</div>
        </main>

        <nav class="bottom-nav">
            <a href="#" class="nav-btn">
                <i class="fas fa-th-large"></i> More
            </a>

            <a href="#" class="nav-btn active">
                <i class="fas fa-shopping-bag"></i> Orders
            </a>

            <a href="#" class="nav-btn">
                <i class="fas fa-user-circle"></i>
                Profile
            </a>
        </nav>
    </div>

    <div id="product-page">
        <div class="app-header">
            <a href="#" onclick="closeProduct()" class="icon-btn"><i class="fas fa-arrow-left"></i></a>
            <a href="#" onclick="shareProduct()" class="icon-btn"><i class="fas fa-share-alt"></i></a>
        </div>

        <div class="image-container">
            <div class="carousel" id="detail-images"></div>
            <div class="floating-heart" id="like-trigger" onclick="toggleLike()"></div>
        </div>

        <div class="detail-section">
            <div class="title-row">
                <div class="detail-title" id="detail-name">Product Name</div>
                <div class="like-count-text">
                    <i class="fas fa-heart"></i>
                    <span id="like-counter">0</span>
                </div>
            </div>
            
            <div class="detail-meta" id="detail-meta">Brand • Category</div>
            
            <div class="detail-price" id="detail-price">$0.00</div>
            <div class="buyer-protection">
                <i class="fas fa-shield-alt"></i> Buyer Protection included
            </div>
        </div>

        <div class="detail-section">
            <p style="font-size:15px; line-height:1.6; color:#01579b;" id="detail-desc">Description...</p>
        </div>

        <div class="action-bar">
            <button class="btn-aqua btn-offer">Make an offer</button>
            <button class="btn-aqua btn-buy" onclick="alert('Opening checkout...')">Buy now</button>
        </div>
    </div>

    <script>
        // ==========================================
        // CONFIGURATION AREA
        // ==========================================
        const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQxSaXfeWcwBFpXFfbJ4lU25jKhR4ORNTbtQphKOUK7YL4JewJ2NzsS6UNf0V89UnzTufpcreBCJUJo/pub?output=csv";
        
        // Paste your Heart Image Link here (PNG recommended)
        const heartImageUrl = "https://www.freepnglogos.com/uploads/heart-png/heart-icon-small-flat-4.png"; 

        // ==========================================
        
        let allProducts = [];
        const container = document.getElementById('shop-container');
        const mainView = document.getElementById('main-view');
        const productPage = document.getElementById('product-page');

        // Setup Heart Image
        const likeTrigger = document.getElementById('like-trigger');
        if(heartImageUrl && !heartImageUrl.includes("PASTE_YOUR")) {
            likeTrigger.style.backgroundImage = `url('${heartImageUrl}')`;
        } else {
            likeTrigger.style.backgroundColor = '#ff4081'; // Fallback color
            likeTrigger.style.borderRadius = '50%';
        }

        async function loadProducts() {
            if(sheetUrl.includes("PASTE_YOUR")) { renderDummyData(); return; }
            try {
                const response = await fetch(sheetUrl);
                const data = await response.text();
                allProducts = csvToJson(data);
                renderGrid(allProducts);
                checkHash();
            } catch (error) { console.error(error); }
        }

        // CSV Parser with Google Drive Fixer
        function csvToJson(csv) {
            const lines = csv.split('\n');
            const result = [];
            for (let i = 1; i < lines.length; i++) {
                if (!lines[i]) continue;
                const row = lines[i].split(','); 
                
                const cleanImage = (url) => {
                    if (!url) return "";
                    let cleanUrl = url.trim();
                    if (cleanUrl.includes('drive.google.com')) {
                        const idMatch = cleanUrl.match(/[-\w]{25,}/);
                        if (idMatch) return `https://drive.google.com/thumbnail?id=${idMatch[0]}&sz=w1000`;
                    }
                    return cleanUrl;
                };

                result.push({
                    id: i,
                    name: row[0] || "Item",
                    price: (row[1] || "0").replace('$', '').trim(),
                    brand: row[2] || "Brand",
                    image: cleanImage(row[3]), 
                    category: row[4] || "Misc",
                    description: row[5] || "No description.",
                    moreImages: row[6] ? row[6].split(';').map(cleanImage) : [] 
                });
            }
            return result;
        }

        function renderGrid(products) {
            let html = '';
            products.forEach(p => {
                html += `
                    <div class="product-card glass-panel" onclick="openProduct(${p.id})">
                        <img src="${p.image}" class="product-image" onerror="this.src='https://via.placeholder.com/300'">
                        <div class="product-info">
                            <div class="product-title">${p.name}</div>
                            <div class="brand">${p.brand}</div>
                            <div class="price">$${p.price}</div>
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        function openProduct(id) {
            const product = allProducts.find(p => p.id == id);
            if (!product) return;
            window.location.hash = `item-${id}`;
            document.getElementById('detail-name').innerText = product.name;
            document.getElementById('detail-price').innerText = '$' + product.price;
            document.getElementById('detail-desc').innerText = product.description;
            document.getElementById('detail-meta').innerText = `${product.brand} • ${product.category}`;

            let imagesHtml = `<img src="${product.image}">`;
            if (product.moreImages.length > 0) {
                product.moreImages.forEach(img => { if(img) imagesHtml += `<img src="${img}">`; });
            }
            document.getElementById('detail-images').innerHTML = imagesHtml;
            updateLikeState(id);
            mainView.style.display = 'none';
            productPage.style.display = 'block';
            window.scrollTo(0,0);
        }

        function closeProduct() {
            window.location.hash = '';
            mainView.style.display = 'block';
            productPage.style.display = 'none';
        }

        function updateLikeState(id) {
            const btn = document.getElementById('like-trigger');
            const counter = document.getElementById('like-counter');
            const fakeGlobalLikes = Math.floor(id * 123 % 50) + 10;
            const isLiked = localStorage.getItem('liked_item_' + id);
            
            if(isLiked) {
                btn.classList.add('active');
                counter.innerText = fakeGlobalLikes + 1;
            } else {
                btn.classList.remove('active');
                counter.innerText = fakeGlobalLikes;
            }
        }

        function toggleLike() {
            const id = window.location.hash.replace('#item-','');
            const btn = document.getElementById('like-trigger');
            const isLiked = btn.classList.contains('active');
            
            if(isLiked) {
                btn.classList.remove('active');
                localStorage.removeItem('liked_item_' + id);
            } else {
                btn.classList.add('active');
                localStorage.setItem('liked_item_' + id, 'yes');
            }
            updateLikeState(id);
        }

        function checkHash() {
            const hash = window.location.hash;
            if (hash.startsWith('#item-')) { openProduct(hash.replace('#item-', '')); } 
            else { closeProduct(); }
        }
        window.onhashchange = checkHash;

        function renderDummyData() {
            const dummies = [{id:1, name:"Aqua Hoodie", price:"25.00", brand:"Y2K", image:"https://via.placeholder.com/300/a1ffce/005f6b?text=Aqua+Style", description:"Please paste your Google Sheet Link!", moreImages:[]}];
            renderGrid(dummies);
        }

        loadProducts();
    </script>
</body>
</html>
